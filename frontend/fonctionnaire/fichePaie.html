<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiche de Paie</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
            background-color: #f9f9f9;
        }
        .fiche-container {
            max-width: 600px;
            margin: 0 auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .details, .calculations {
            margin-bottom: 20px;
        }
        .details span, .calculations span {
            display: inline-block;
            min-width: 200px;
            font-weight: bold;
        }
        .total {
            font-weight: bold;
            color: #007BFF;
        }
        .print-btn {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #007BFF;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .print-btn:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="fiche-container" id="fiche-container">
        <h1>Fiche de Paie</h1>

        <div class="details">
            <p><span>Nom:</span> <span id="nom"></span></p>
            <p><span>Prénom:</span> <span id="prenom"></span></p>
            <p><span>Matricule:</span> <span id="matricule"></span></p>
            <p><span>Téléphone:</span> <span id="tel"></span></p>
            <p><span>Date:</span> <span id="current-date"></span></p>
        </div>

        <div class="calculations">
            <p><span>Salaire Brut:</span> <span id="salaire-brut"></span> FC</p>
            <p><span>Prime:</span> <span id="prime"></span> FC</p>
            <p class="total"><span>Total Brut:</span> <span id="total-brut"></span> FC</p>
            <hr>
            <p><span>Charges Sociales:</span> <span id="charges-sociales"></span> FC</p>
            <p><span>Impôt sur Revenu:</span> <span id="impot-revenu"></span> FC</p>
            <p class="total"><span>Total Déductions:</span> <span id="total-deductions"></span> FC</p>
            <hr>
            <p class="total"><span>Salaire Net:</span> <span id="salaire-net"></span> FC</p>
        </div>

        <button class="print-btn" onclick="printFiche()">Imprimer</button>
    </div>

    <script>
        // Récupérer les données JSON depuis localStorage
        const storedData = localStorage.getItem('agent');
        if (storedData) {
            const jsonData = JSON.parse(storedData);

            const prime = 0; // Exemple de prime
            const chargesSociales = 15; // Charges sociales calculées
            const impotRevenu = 10; // Impôt sur le revenu calculé

            // Calculs
            const salaireBrut = jsonData.salaire;
            const totalBrut = salaireBrut + prime;
            const totalDeductions = chargesSociales + impotRevenu;
            const salaireNet = totalBrut - totalDeductions;

            // Mettre à jour la date actuelle
            document.getElementById('current-date').textContent = new Date().toLocaleDateString();

            // Mettre à jour les champs HTML dynamiquement
            document.getElementById('nom').textContent = jsonData.nom;
            document.getElementById('prenom').textContent = jsonData.prenom;
            document.getElementById('matricule').textContent = jsonData.matricule;
            document.getElementById('tel').textContent = jsonData.tel;
            document.getElementById('salaire-brut').textContent = salaireBrut;
            document.getElementById('prime').textContent = prime;
            document.getElementById('total-brut').textContent = totalBrut;
            document.getElementById('charges-sociales').textContent = chargesSociales;
            document.getElementById('impot-revenu').textContent = impotRevenu;
            document.getElementById('total-deductions').textContent = totalDeductions;
            document.getElementById('salaire-net').textContent = salaireNet;
        } else {
            console.error('Aucune donnée trouvée dans localStorage pour "agent".');
        }

        // Fonction pour imprimer la fiche de paie
        function printFiche() {
            const fiche = document.getElementById('fiche-container');
            const originalContent = document.body.innerHTML;

            document.body.innerHTML = fiche.outerHTML;
            window.print();
            document.body.innerHTML = originalContent;
        }
    </script>
</body>
</html>
